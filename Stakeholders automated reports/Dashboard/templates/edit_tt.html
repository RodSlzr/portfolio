{% extends "layout.html" %}

{% block title %}
    Edit Think Tank
{% endblock %}

{% block main %}

{% if subm == "not yet" %}
<form action="{{url_for('edit_tt', name=name)}}" enctype="multipart/form-data" class="needs-validation" method="post">
        <h4>Stakeholder</h4>

        <div class="btn-group" role="group" aria-label="Basic example">          
            <button type="button" class = "btn btn-primary btn-lg">Think Tank</button>
        </div>

        <p></p>
        <h4 class="d-flex">Fuentes de información</h4>
        <div class="form-floating mb-3">
            <textarea type="text" class="form-control" id="fuentes" name="fuentes" placeholder="Fuentes" rows="3" spellcheck="false" style="height: 140px;">{{ think_tank_info['fuentes'] }}</textarea>
            <label for="fuentes">Pegue los links o indique la fuente de donde obtiene la información para futuras actualizaciones</label>
        </div>

        <h4 class="d-flex">Información general</h4>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nombre" placeholder="Nombre" name="nombre" value="{{ think_tank_info['nombre'] }}" required>
            <label for="nombre">Nombre</label>
            <div class="invalid-feedback d-block d-flex">Campo obligatorio</div>
        </div>

        <div class="card mb-1 h-100">
            <div class="card-body">
                <h4 class="card-title">Logo actual</h4>                                   
                <image src="{{logo}}"  height="200"></image>
            </div>
        </div>
        
        <div class="form-group">
            <label for="formFile" class="form-label mt-4 d-flex">Actualizar logo del Think Tank</label>
            <input class="form-control" type="file" id="formFile" name="logo_tt">
        </div>

        <div class="form-floating mb-3">
            <textarea type="text" class="form-control" id="desc" name="desc" placeholder="Descripción" rows="3" spellcheck="false" style="height: 140px;">{{ think_tank_info['desc'] }}</textarea>
            <label for="desc">Descripción</label>
        </div>

        <div class="form-floating mb-3">
            <textarea type="text" class="form-control" id="comments" name="comments" placeholder="comentarios" rows="3" spellcheck="false" style="height: 140px;">{{ think_tank_info['comments'] }}</textarea>
            <label for="comments">Comentarios adicionales</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="sitio" name="sitio" value="{{ think_tank_info['web'] }}" placeholder="Sitio">
            <label for="sitio">Sitio web</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="user_tw" name="user_tw" value="{{ think_tank_info['twitter'] }}" placeholder="Usuario de twitter (no incluir @)">
            <label for="sitio">Usuario de twitter (no incluir @)</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="contacto" name="contacto" value="{{ think_tank_info['contacto_g'] }}" placeholder="Contacto general">
            <label for="contacto">Contacto general</label>
        </div>

        <h4 class="d-flex">Contacto de trade</h4>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nombre_trade" name="nombre_trade" value="{{ think_tank_info['contacto_t_nombre'] }}" placeholder="Nombre">
            <label for="nombre_trade">Nombre</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="puesto_trade" name="puesto_trade" value="{{ think_tank_info['contacto_t_puesto'] }}" placeholder="Puesto">
            <label for="puesto_trade">Puesto</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="correo_trade" name="correo_trade"  value="{{ think_tank_info['contacto_t_correo'] }}" placeholder="Correo">
            <label for="correo_trade">Correo</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="telefono_trade" name="telefono_trade"  value="{{ think_tank_info['contacto_t_tel'] }}" placeholder="Teléfono">
            <label for="telefono_trade">Teléfono</label>
        </div>

        <h4 class="d-flex">Temas que trabajan</h4>

        <div class="form-floating mb-3">
            <textarea type="text" class="form-control" id="temas" name="temas" placeholder="Temas" rows="1" spellcheck="false" style="height: 140px;">{{ think_tank_info['temas'] }}</textarea>
            <label for="temas">Separe los temas con comas</label>
        </div>

        <h4 class="d-flex">Posición política</h4>

        <div class="form-check d-flex">
            {% if "Conservador" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="democrata" name="democrata" id="democrata" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="democrata" name="democrata" id="democrata">
            {% endif %}
            <label class="form-check-label" for="Demócrata">
              Demócrata
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Conservador" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="republicano" name="republicano" id="republicano" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="republicano" name="republicano" id="republicano">
            {% endif %}
            <label class="form-check-label" for="Republicano">
              Republicano
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Conservador" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="conservador" name="conservador" id="Conservador" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="conservador" name="conservador" id="Conservador">
            {% endif %}
            <label class="form-check-label" for="Conservador">
              Conservador
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Centro" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="centro" name="centro" id="Centro" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="centro" name="centro" id="Centro">
            {% endif %}
            <label class="form-check-label" for="Centro">
              Centro
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Liberal" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="liberal" name="liberal" id="Liberal" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="liberal" name="liberal" id="Liberal">
            {% endif %}
            <label class="form-check-label" for="Liberal">
              Liberal
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Progresista" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="progresista" name="progresista" id="Progresista" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="progresista" name="progresista" id="Progresista">
            {% endif %}
            <label class="form-check-label" for="Progresista">
              Progresista
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Libertario" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="libertario" name="libertario" id="Libertario" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="libertario" name="libertario" id="Libertario">
            {% endif %}
            <label class="form-check-label" for="Libertario">
              Libertario
            </label>
        </div>

        <div class="form-check d-flex">
            {% if "Independiente" in think_tank_info['posicion_pol'] %}
                <input class="form-check-input" type="checkbox" value="independiente" name="independiente" id="Independiente" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="independiente" name="independiente" id="Independiente">
            {% endif %}
            <label class="form-check-label" for="Independiente">
              Independiente
            </label>
        </div>

        <h4 class="d-flex">Financiamiento a congresistas</h4>

        <div class="form-check d-flex">
            {% if "Sí" == think_tank_info['fin_disp'] %}
                <input class="form-check-input" type="checkbox" value="Sí" name="fin_disp" value="{{ think_tank_info['nombre'] }}" id="fin_disp" checked="">
            {% else %}
                <input class="form-check-input" type="checkbox" value="Sí" name="fin_disp" value="{{ think_tank_info['nombre'] }}" id="fin_disp">
            {% endif %}
            <label class="form-check-label" for="Independiente">
              Dato de financiemiento disponible
            </label>
        </div>

        <div class="form-floating mb-3 form-group has-danger">
            <input type="text" class="form-control" id="fin_total" name="fin_total"  value="{{ think_tank_info['fin_total'] }}" placeholder="Teléfono">
            <label for="fin_total">Total en USD</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="fin_dem" name="fin_dem" value="{{ think_tank_info['fin_dem'] }}" placeholder="Teléfono">
            <label for="fin_dem">Total a Demócratas en USD</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="fin_rep" name="fin_rep" value="{{ think_tank_info['fin_rep'] }}" placeholder="Teléfono">
            <label for="fin_rep">Total a Republicanos en USD</label>
        </div>

        <h4 class="d-flex">Estudios y Publicaciones</h4>

        <div class="form-floating mb-3">
            <textarea type="text" class="form-control" id="estudios" name="estudios" placeholder="Estudios" rows="1" spellcheck="false" style="height: 140px;">{{ think_tank_info['estudios'] }}</textarea>
            <label for="estudios">Incluya título, autor, año y link</label>
        </div>

        <button type="button" class = "btn btn-primary btn-sm">
            <input class = "btn btn-primary btn-lg" type="submit" value="Actualizar Think Tank" name="nuevo_tt"/></button> 

</form>

{% elif subm == "successful" %}
<div class="card text-white bg-success mb-3">
    <div class="card-body">
      <h5 class="card-title">{{ resp }}</h5>
    </div>
</div>

{% else %}
<div class="card text-white bg-danger mb-3">
    <div class="card-body">
      <h5 class="card-title">{{ resp }}</h5>
    </div>
</div>

{% endif %}

{% endblock %}
